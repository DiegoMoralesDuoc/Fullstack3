<div class="app-content p-4">
  <div class="container-fluid">
    <div class="card mx-auto" style="max-width: 600px;">
      <div class="card-header bg-primary text-white">
        <h3 class="card-title mb-0">Registrar nuevo usuario</h3>
      </div>
      <form (ngSubmit)="registrarUsuario()" #formRegistro="ngForm" novalidate>

        <div *ngIf="alerta" class="alert" [ngClass]="'alert-' + alerta.tipo" role="alert">
          {{ alerta.mensaje }}
        </div>

        <div class="card-body">
          <!-- Nombre -->
          <div class="form-floating mb-3">
            <input
              id="nombre"
              name="nombre"
              type="text"
              class="form-control"
              required
              [(ngModel)]="nombre"
              #nombreCtrl="ngModel"
              [class.is-invalid]="nombreCtrl.invalid && nombreCtrl.touched"
            />
            <label for="nombre">Nombre</label>
            <div *ngIf="nombreCtrl.invalid && nombreCtrl.touched" class="invalid-feedback">
              Introduce el nombre.
            </div>
          </div>

          <!-- Apellidos -->
          <div class="form-floating mb-3">
            <input
              id="apellidos"
              name="apellidos"
              type="text"
              class="form-control"
              required
              [(ngModel)]="apellidos"
              #apellidosCtrl="ngModel"
              [class.is-invalid]="apellidosCtrl.invalid && apellidosCtrl.touched"
            />
            <label for="apellidos">Apellidos</label>
            <div *ngIf="apellidosCtrl.invalid && apellidosCtrl.touched" class="invalid-feedback">
              Introduce los apellidos.
            </div>
          </div>

          <!-- Correo -->
          <div class="form-floating mb-3">
            <input
              id="correo"
              name="correo"
              type="email"
              class="form-control"
              required
              [(ngModel)]="correo"
              #correoCtrl="ngModel"
              [class.is-invalid]="correoCtrl.invalid && correoCtrl.touched"
            />
            <label for="correo">Correo electrónico</label>
            <div *ngIf="correoCtrl.invalid && correoCtrl.touched" class="invalid-feedback">
              Introduce un correo válido.
            </div>
          </div>

          <!-- Contraseña -->
          <div class="form-floating mb-3">
            <input
              id="password"
              name="password"
              type="password"
              class="form-control"
              required
              minlength="8"
              [(ngModel)]="password"
              #passwordCtrl="ngModel"
              [class.is-invalid]="passwordCtrl.invalid && passwordCtrl.touched"
            />
            <label for="password">Contraseña</label>
            <div *ngIf="passwordCtrl.invalid && passwordCtrl.touched" class="invalid-feedback">
              Debe contener al menos 8 caracteres, una mayúscula, un número y un símbolo.
            </div>
          </div>

          <!-- Rol -->
          <div class="mb-3">
            <label for="rol" class="form-label">Rol del usuario</label>
            <select
              id="rol"
              name="rol"
              class="form-select"
              required
              [(ngModel)]="rol"
              #rolCtrl="ngModel"
              [class.is-invalid]="rolCtrl.invalid && rolCtrl.touched"
            >
              <option *ngFor="let r of roles" [value]="r">{{ r }}</option>
            </select>
            <div *ngIf="rolCtrl.invalid && rolCtrl.touched" class="invalid-feedback">
              Selecciona un rol válido.
            </div>
          </div>
        </div>

        <div class="card-footer text-end">
          <button type="submit" class="btn btn-primary" [disabled]="formRegistro.invalid">
            Registrar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
